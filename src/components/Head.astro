---
import type { Props } from '@astrojs/starlight/props';
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import PlausibleAnalytics from './PlausibleAnalytics.astro';
---

<StarlightHead {...Astro.props}><slot /></StarlightHead>
<PlausibleAnalytics />

<script is:inline>
  // Redirect legacy .html URLs to clean URLs
  // This handles old bookmarks/links that include .html extension
  (function () {
    const path = window.location.pathname;
    if (path.endsWith('.html') && path !== '/404.html') {
      window.location.replace(path.slice(0, -5));
    }
  })();
</script>
